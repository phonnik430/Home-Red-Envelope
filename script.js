// ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏£‡∏≤‡∏á‡∏ß‡∏±‡∏•
const rewards = ["200‡∏ø", "400‡∏ø", "600‡∏ø"];

// ‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÅ‡∏™‡∏î‡∏á‡∏Ñ‡∏ß‡∏≤‡∏°‡∏¢‡∏¥‡∏ô‡∏î‡∏µ (‡πÅ‡∏Å‡πâ Key ‡πÉ‡∏´‡πâ‡∏ï‡∏£‡∏á‡∏Å‡∏±‡∏ö‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£ rewards ‡∏î‡πâ‡∏≤‡∏ô‡∏ö‡∏ô)
const messageMap = {
    "200‡∏ø": "‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏£‡∏≤‡∏á‡∏ß‡∏±‡∏• 200Bath ‡πÄ‡∏™‡∏µ‡∏¢‡πÉ‡∏à‡∏î‡πâ‡∏ß‡∏¢ üò≠",
    "400‡∏ø": "‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏£‡∏≤‡∏á‡∏ß‡∏±‡∏• 400Bath !!! üî•",
    "600‡∏ø": "‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏£‡∏≤‡∏á‡∏ß‡∏±‡∏•‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î 600‡∏ö‡∏≤‡∏ó üéâüéâüéâ"
};

let hasSelected = false;

/**
 * ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏™‡∏∏‡πà‡∏°‡πÅ‡∏ö‡∏ö‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡πÄ‡∏õ‡∏≠‡∏£‡πå‡πÄ‡∏ã‡πá‡∏ô‡∏ï‡πå
 * ‡∏õ‡∏£‡∏±‡∏ö‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏Ç‡πÉ‡∏ô‡πÄ‡∏á‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏Ç if/else ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô % ‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏¢
 */
// --- ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏™‡∏∏‡πà‡∏°‡πÅ‡∏ö‡∏ö‡∏Å‡∏≥‡∏´‡∏ô‡∏î % ‡∏ï‡∏≤‡∏°‡∏ó‡∏µ‡πà‡∏Ñ‡∏∏‡∏ì‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£ ---
function getWeightedReward() {
    const rand = Math.random() * 100; // ‡∏™‡∏∏‡πà‡∏°‡πÄ‡∏•‡∏Ç 0-100

    if (rand < 5) {         
        // ‡πÇ‡∏≠‡∏Å‡∏≤‡∏™ 5% (0 ‡∏ñ‡∏∂‡∏á 4.99) -> ‡πÑ‡∏î‡πâ 200
        return "200‡∏ø";
    } else if (rand < 50) {  
        // ‡πÇ‡∏≠‡∏Å‡∏≤‡∏™ 15% (5 ‡∏ñ‡∏∂‡∏á 19.99) -> ‡πÑ‡∏î‡πâ 400
        // (‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏à‡∏≤‡∏Å: 5% ‡πÄ‡∏î‡∏¥‡∏° + 15% ‡πÉ‡∏´‡∏°‡πà = 20)
        return "400‡∏ø";
    } else {                 
        // ‡πÇ‡∏≠‡∏Å‡∏≤‡∏™ 80% (‡∏ó‡∏µ‡πà‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏à‡∏ô‡∏ñ‡∏∂‡∏á 100) -> ‡πÑ‡∏î‡πâ 600
        return "600‡∏ø";
    }
}

function openEnvelope(index) {
    if (hasSelected) return;

    hasSelected = true;
    const envelopes = document.querySelectorAll('.envelope');
    const statusMsg = document.getElementById('status-msg');
    
    // ‡πÉ‡∏ä‡πâ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏™‡∏∏‡πà‡∏°‡∏ï‡∏±‡∏ß‡πÉ‡∏´‡∏°‡πà‡∏ó‡∏µ‡πà‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ % ‡πÑ‡∏ß‡πâ
    const winAmount = getWeightedReward(); 

    envelopes.forEach((env, i) => {
        if (i === index) {
            env.innerText = winAmount;
            env.classList.add('opened');
            statusMsg.innerText = messageMap[winAmount]; 
        } else {
            env.classList.add('disabled');
            env.innerText = "X";
        }
    });
}

// ‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡πÉ‡∏ä‡πâ shuffledRewards ‡πÉ‡∏ô‡∏Å‡∏≤‡∏£ init ‡πÄ‡∏û‡∏£‡∏≤‡∏∞‡πÄ‡∏£‡∏≤‡∏™‡∏∏‡πà‡∏°‡∏™‡∏î‡∏ï‡∏≠‡∏ô‡∏Ñ‡∏•‡∏¥‡∏Å
function initGame() {
    hasSelected = false;
}


initGame();
